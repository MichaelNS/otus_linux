# Vagrant стенд для NFS

# Домашнее задание

Vagrant стенд для NFS
Цель:

Научиться самостоятельно развернуть сервис NFS и подключить к нему клиента

NFS:

    vagrant up должен поднимать 2 виртуалки: сервер и клиент;
    на сервер должна быть расшарена директория;
    на клиента она должна автоматически монтироваться при старте (fstab или autofs);
    в шаре должна быть папка upload с правами на запись;
    требования для NFS: NFSv3 по UDP, включенный firewall.

    Настроить аутентификацию через KERBEROS (NFSv4)

# Описание каталогов и файлов в репозитории
- Vagrantfile - ВМ
- nfsc_script.sh - развертывание клиента
- nfss_script.sh - развертывание сервера

# Развертывание ВМ
Для проверки работоспособности стенда после перезагрузки
```bash
vagrant up && vagrant reload
```

# Проверка работоспособности
- заходим на сервер
- заходим в каталог `/srv/share/upload`
- создаём тестовый файл `touch check_file`
- заходим на клиент
- заходим в каталог `/mnt/upload`
- проверяем наличие ранее созданного файла
- создаём тестовый файл `touch client_file`
- проверяем, что файл успешно создан

Если вышеуказанные проверки прошли успешно это значит, что проблем с правами нет.


Предварительно проверяем клиент:
- перезагружаем клиент
- заходим на клиент
- заходим в каталог `/mnt/upload`
- проверяем наличие ранее созданных файлов

Проверяем сервер:
- заходим на сервер в отдельном окне терминала
- перезагружаем сервер
- заходим на сервер
- проверяем наличие файлов в каталоге `/srv/share/upload/`
- проверяем статус сервера NFS `systemctl status nfs`
- проверяем статус firewall `systemctl status firewalld`
- проверяем экспорты `exportfs -s`
- проверяем работу RPC `showmount -a 192.168.50.10`

Проверяем клиент:
- возвращаемся на клиент
- перезагружаем клиент
- заходим на клиент
- проверяем работу RPC `showmount -a 192.168.50.10`
- заходим в каталог `/mnt/upload`
- проверяем статус монтирования `mount | grep mnt`
- проверяем наличие ранее созданных фай лов
- создаём тестовый файл `touch final_check`
- проверяем, что файл успешно создан

Если вышеуказанные проверки прошли успешно, это значит, что демонстрационный стенд работоспособен и готов к работе.

